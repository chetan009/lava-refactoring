{% extends 'base.yaml' %}
{% block body %}
device_type: wandboard

{% set console_device = console_device | default('ttymxc0') %}
{% set baud_rate = baud_rate | default(115200) %}

parameters:
  bootz:
    kernel: '{{ bootz_kernel_addr|default('0x11000000') }}'
    ramdisk: '{{ bootz_ramdisk_addr|default('0x13000000') }}'
    dtb: '{{ bootz_dtb_addr|default('0x12000000') }}'

actions:
  deploy:
    # list of deployment methods which this device supports
    methods:
      tftp
  boot:
    # list of boot methods which this device supports.
    methods:
      u-boot:
        parameters:
          bootloader_prompt: {{ bootloader_prompt|default('=>') }}
          boot_message: {{ boot_message|default('Booting Linux') }}
          send_char: False
        ramdisk:
          commands:
{{ base_uboot_commands }}
{{ base_uboot_addr_commands }}
{{ base_ftp_commands }}
          - setenv bootargs 'console={{ console_device }},{{ baud_rate }} debug rw root=/dev/ram0 ip=dhcp'
{{ base_uboot_bootcmd }}
        nfs:
          commands:
{{ base_uboot_commands }}
{{ base_uboot_addr_commands }}
{{ base_tftp_commands }}
          - "setenv nfsargs 'setenv bootargs console={{ console_device }},{{ baud_rate }}n8 root=/dev/nfs rw {{ base_nfsroot_args }} ip=dhcp'"
{{ base_nfs_uboot_bootcmd }}
{% endblock %}
